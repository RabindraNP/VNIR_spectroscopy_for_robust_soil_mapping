[
["intro.html", "R code for Robust soil mapping at the farm scale with vis-NIR spectroscopy (Ramirez-Lopez et al., 2019) Chapter 1 Introduction 1.1 paper summary 1.2 Study area 1.3 In case of comments/questions/issues 1.4 For citation or details please refer to: 1.5 Notes", " R code for Robust soil mapping at the farm scale with vis-NIR spectroscopy (Ramirez-Lopez et al., 2019) Leo Ramirez-Lopez and Alex Wadoux 2019-06-17 Chapter 1 Introduction In the spirit of reproducible research, here we share the data and the computational code used for carrying out the analyses presented in our paper “Robust soil mapping at the farm scale with vis-NIR spectroscopy” which is by the way open access. 1.1 paper summary Sustainable agriculture practices are often hampered by the prohibitive costs associated with the generation of fine-resolution soil maps. Recently, several papers have been published highlighting how visible and near infrared(vis-NIR) reflectance spectroscopy may offer an alternative to address this problem by increasing the density of soil sampling and by reducing the number of conventional laboratory analyses needed. However, for farm-scale soil mapping, previous studies rarely focused on sample optimization for the calibration of vis-NIR models or on robust modelling of the spatial variation of soil properties predicted by vis-NIR spectroscopy. In the present study, we used soil vis-NIR spectroscopy models optimized in terms of both number of calibration samples and accuracy for high-resolution robust farm-scale soil mapping and addressed some of the most common pitfalls identified in previous research. We collected 910 samples from 458 locations at two depths (A, 0-0.20 m; B, 0.80-1.0 m) in the state of Sao Paulo, Brazil. All soil samples were analysed by conventional methods and scanned in the vis-NIR spectral range. With the vis-NIR spectra only, we inferred statistically the optimal set size and the best samples with which to calibrate vis-NIR models. The calibrated vis-NIR models were validated and used to predict soil properties for the rest of the samples. The prediction error of the spectroscopic model was propagated through the spatial analysis, in which robust block kriging was used to predict particle-size fractions and exchangeable calcium content for each depth. The results indicated that statistical selection of the calibration samples based on vis-NIR spectra considerably decreased the need for conventional chemical analysis for a given level of mapping accuracy. 1.2 Study area The study area is located in Brazil between the municipalities of Barra Bonita and Mineiros do Tiete (in the state of Sao Paulo). 1.3 In case of comments/questions/issues In case you have any question comments/questions/issue related to the code presented here please go to: https://github.com/l-ramirez-lopez/VNIR_spectroscopy_for_robust_soil_mapping/issues and create a new issue. 1.4 For citation or details please refer to: Ramirez-Lopez, L., Wadoux, A. C., Franceschini, M. H. D., Terra, F. S., Marques, K. P. P., Sayao, V. M., &amp; Dematte, J. A. M. (2019). Robust soil mapping at the farm scale with vis-NIR spectroscopy. European Journal of Soil Science. 1.5 Notes Reproducibility: slight discrepancies between the results of reoported in the paper and the results you get in your R console might be expected in case you use different R package versions and different random number generators. To advanced R users: In order to make the R code more readable/interpretable we have opted for using for loops instead of vectorized functions. There are several aspects of the code that can be improved to reach better computational efficiency. "],
["required-r-packages.html", "Chapter 2 Required R packages", " Chapter 2 Required R packages In order to run all the code presented in the next sections you will need to have the following packages installed You can install the required packages using the following code requiredpackages &lt;- c(&quot;resemble&quot;, &quot;prospectr&quot;, &quot;clhs&quot;, &quot;matrixStats&quot;, &quot;doParallel&quot;, &quot;ggplot2&quot;, &quot;tidyr&quot;, &quot;tidyverse&quot;, &quot;georob&quot;, &quot;rgdal&quot;, &quot;raster&quot;, &quot;RColorBrewer&quot;) toinstall &lt;- requiredpackages[!requiredpackages %in% rownames(installed.packages())] if(length(toinstall) &gt; 0){ install.packages(toinstall) } lapply(requiredpackages, FUN = library, character.only = TRUE) "],
["required-data.html", "Chapter 3 Required data", " Chapter 3 Required data In this section you will find the instructions on how to download and read the soil dataset used in our paper. You can download the file ‘SoilNIRSaoPaulo.rds’, alternatively you can visit to the GitHub repository of the paper where the file resides. This rds file contains a data.frame with 910 rows (samples) and the following variables: Nr: An arbitrary sample number. ID: A factor indicating the sample IDs. The first character is a letter which indicates the depth layer at which the sample was collected (A: 0-20 cm and B: 80-100 cm). POINT_X: The X (geographical) coordinate. POINT_Y: The Y (geographical) coordinate. Sand: The percentage of sand contnet in the soil sample. Silt: The percentage of silt contnet in the soil sample. Clay: The percentage of clay contnet in the soil sample. Ca: The exchangeable Calcium content in the sample (\\(mmol_{c}\\) \\(kg^{−1}\\)). set: A factor indicating whether the sample is used for model’s validation or if it can be used to calibrate models. spc: A set of 307 variables representing the wavelengths from 502 nm to 2338 nm in steps of 6 nm. Further information on this dataset can be found in our paper We recommend to create a local folder (e.g. “./myworkingdirectory”). If you downloaded the file to this local folder then: workingd &lt;- &quot;/myworkingdirectory&quot; setwd(workingd) data &lt;- readRDS(&quot;SoilNIRSaoPaulo.rds&quot;) Alternatively, you can also read the file directly from the GitHub repository of the paper: nirfile &lt;- file(&quot;https://github.com/l-ramirez-lopez/VNIR_spectroscopy_for_robust_soil_mapping/raw/master/SoilNIRSaoPaulo.rds&quot;) data &lt;- readRDS(nirfile) names(data) In addition you also need a R object of class (SpatialPolygonsDataFrame of the package sp) which contains the polygon of the study area. You can also download the file (polygon.rds) containing this object by clicking here. "],
["prerequisites.html", "Chapter 4 Prerequisites", " Chapter 4 Prerequisites "]
]
